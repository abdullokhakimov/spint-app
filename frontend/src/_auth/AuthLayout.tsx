import { Outlet, Navigate } from "react-router-dom"
import '../styles/Authentication.css'
import { useTranslation } from "react-i18next";
import { useUserContext } from "../context/AuthContext";
import { Languages } from "../types/index"

function AuthLayout() {
	const { isAuthenticated } = useUserContext();

	const { i18n } = useTranslation();
	const lngs: Languages = {
		ru: { nativeName: 'Русский' },
		uz: { nativeName: "O'zbekcha" }
	};

	return (
		<>
			{ isAuthenticated ? (
				<Navigate to="/"/>
			) : (
				<div className='authentication'>
					<img 
						src="/assets/images/authentication-bg.png" 
						className="authentication__background"
					/>

					<section className='authentication__wrapper'>

						<svg
							className="authentication__logo"
							viewBox="0 0 146 40"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<path
							d="M82.9908 9.02966H90.4691C90.5826 9.02966 90.6602 9.15076 90.6178 9.26173L83.0307 29.0719C82.2832 30.568 81.7594 30.9676 80.7296 31.2195C80.7184 31.2224 80.7056 31.2238 80.6936 31.2238H72.9554C72.8419 31.2238 72.7644 31.1016 72.8075 30.9905L80.712 10.844C81.3109 9.53388 81.8058 9.13025 82.9908 9.02966Z"
							fill="#2628DD"
							/>
							<path
							d="M93.9307 31.2238H86.5475C86.4339 31.2238 86.3564 31.1021 86.3996 30.991L94.105 11.1393C94.8358 9.66784 95.3147 9.17881 96.3437 9.15619H122.133C122.246 9.15619 122.324 9.27686 122.282 9.38775L115.094 28.3124C114.386 29.7999 114.03 30.6833 112.439 31.2159C112.423 31.2211 112.407 31.2238 112.39 31.2238H104.702C104.586 31.2238 104.51 31.1001 104.554 30.9887L109.721 18.2098C109.766 18.0985 109.689 17.9748 109.574 17.9748H101.088C101.024 17.9748 100.965 18.016 100.94 18.0793L96.9434 28.3124C96.0871 30.0747 95.5282 30.909 93.9594 31.2209C93.9499 31.2228 93.9402 31.2238 93.9307 31.2238Z"
							fill="#2628DD"
							/>
							<path
							d="M125.912 31.2237H118.529C118.415 31.2237 118.338 31.1025 118.381 30.9916L130.244 0.105367C130.269 0.0416741 130.327 0 130.393 0H139.205C139.317 0 139.395 0.119944 139.353 0.230696L136.168 8.75665C136.126 8.86745 136.204 8.98737 136.317 8.98737H144.962C145.075 8.98737 145.152 9.10703 145.111 9.21775L142.798 15.4431C142.101 17.012 141.541 17.5066 140.297 17.8018C140.285 17.8045 140.274 17.806 140.262 17.806H133.283C132.662 17.8225 132.473 18.0183 132.324 18.5655L128.486 28.8608C127.865 30.3514 127.352 30.9393 125.941 31.2208C125.932 31.2227 125.922 31.2237 125.912 31.2237Z"
							fill="#2628DD"
							/>
							<path
							d="M11.066 3.13658L5.17057 17.6552C5.12535 17.7666 5.20275 17.8905 5.31756 17.8905H13.0307C13.4244 17.9021 14.6775 17.1853 15.1495 15.7386L17.3483 9.95794C17.6475 9.16486 17.9535 8.98309 18.6276 8.90309H39.3223C39.3316 8.90309 39.3411 8.90216 39.3504 8.90047C40.2868 8.72157 40.6898 8.29025 41.2553 7.13093L43.8828 0.40197C43.9262 0.29088 43.8488 0.168884 43.735 0.168884H15.4694C13.1213 0.450068 12.2605 1.23566 11.0799 3.10953C11.0746 3.11802 11.0698 3.1272 11.066 3.13658Z"
							fill="#2628DD"
							/>
							<path
							d="M3.55367 22.3808L0.0131737 31.0728C-0.0321992 31.1842 0.0452042 31.3082 0.160086 31.3082H28.5416C30.8348 31.025 31.9328 30.5282 33.0592 28.1436L38.8418 13.7369C38.8865 13.6256 38.8091 13.5022 38.6946 13.5022H30.9803C29.9978 13.5441 29.5486 13.8008 29.0614 14.979L26.7426 21.2659C26.5042 21.9559 26.2712 22.2132 25.6232 22.2786H3.70058C3.63668 22.2786 3.57891 22.3188 3.55367 22.3808Z"
							fill="#2628DD"
							/>
							<path
							fillRule="evenodd"
							clipRule="evenodd"
							d="M33.0991 40H42.3469C42.412 40 42.4705 39.9584 42.495 39.8948L45.5728 31.8987C45.7996 31.326 45.9941 31.0986 46.6922 31.1814H66.9212C67.904 31.1289 68.2625 30.812 68.6802 29.9156L76.7452 9.17788C76.7884 9.06683 76.711 8.94505 76.5972 8.94505H46.9321C45.5601 8.92843 44.997 9.19451 44.4934 10.3375L32.9513 39.7667C32.9077 39.8778 32.985 40 33.0991 40ZM48.931 22.2362L50.8434 18.4096C50.8478 18.4009 50.8514 18.3917 50.8543 18.3823C50.994 17.9327 51.1534 17.8452 51.5296 17.8902H64.2346C64.3508 17.8902 64.4282 18.0168 64.3803 18.1285L62.9633 21.4345C62.8092 21.8873 62.6268 22.0891 62.1579 22.3444C62.1356 22.3566 62.1107 22.3628 62.0856 22.3628H48.9952C48.9335 22.3628 48.8968 22.2903 48.931 22.2362Z"
							fill="#2628DD"
							/>
						</svg>

						<Outlet/>

						<div className="authentication__lang">
							{Object.keys(lngs).map((lng) => (
								<button className={`authentication__lang__button ${i18n.resolvedLanguage === lng ? 'selected' : null}`} key={lng} type="submit" onClick={() => i18n.changeLanguage(lng)}>
									{lngs[lng as keyof Languages].nativeName}
								</button>
							))}
						</div>
					</section>	
				</div>
			)}
		</>
	)
}

export default AuthLayout